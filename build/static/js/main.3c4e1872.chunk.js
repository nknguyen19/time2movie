(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{105:function(e,t){},107:function(e,t){},138:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(55),s=a.n(c),i=(a(63),a(65),a(66),a(8)),o=a(1),l=a(3),u=a.n(l),m=a(4),p=a(22),d=a(2),f=a(12),g=a.n(f),h="https://sheltered-retreat-14346.herokuapp.com",v=(a(70),function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),i=Object(d.a)(s,2),l=i[0],p=i[1],f=Object(n.useState)([]),v=Object(d.a)(f,2),E=v[0],b=v[1],j=Object(n.useState)(!1),y=Object(d.a)(j,2),O=y[0],w=y[1],k=(Object(o.f)(),function(){var e=Object(m.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n=t.target.value,setTimeout(function(){if(n===t.target.value)if(n.length>0){for(var e=[],r=0;r<a.length;r++)(a[r].title.toLowerCase().includes(n.toLowerCase())||a[r].director.toLowerCase().includes(n.toLowerCase())||a[r].gerne.toLowerCase().includes(n.toLowerCase())||a[r].stars.join(" , ").includes(n.toLowerCase()))&&e.push(a[r]);e.sort(function(e,t){return e.rating<t.rating?1:t.rating<e.rating?-1:0}),p(e.slice(0,10))}else p([])},500);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),x=function(e,t){var a=0,n=0,c=[];e=e.toLowerCase();for(var s=t.toLowerCase();(n=s.indexOf(e,a))>-1;)c.push(r.a.createElement("p",null,t.substring(0,n))),c.push(r.a.createElement("p",{className:"match"},t.substring(n,n+e.length))),a=n+e.length;return c.push(r.a.createElement("p",null,t.substring(a))),c};return Object(n.useEffect)(Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/api/movie/getall"));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,c(a);case 7:case"end":return e.stop()}},e)})),[]),Object(n.useEffect)(Object(m.a)(u.a.mark(function e(){var t,a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],console.log(l),a=0;case 3:if(!(a<l.length)){e.next=14;break}return e.next=6,fetch("https://api.themoviedb.org/3/search/movie?api_key=15d2ea6d0dc1d476efbca3eba2b9bbfb&query=".concat(l[a].title));case 6:return n=e.sent,e.next=9,n.json();case 9:r=e.sent,t[a]="http://image.tmdb.org/t/p/w500/".concat(r.results[0]?r.results[0].poster_path:"/default_movie_poster.jpg");case 11:++a,e.next=3;break;case 14:b(t);case 15:case"end":return e.stop()}},e)})),[l]),r.a.createElement("div",{className:"search-bar"},r.a.createElement("div",{className:"input-search"},r.a.createElement("i",{class:"fa fa-search"}),r.a.createElement("input",{id:"search-input",type:"text",placeholder:"Search for a movie...",onFocus:function(){return w(!0)},onBlur:function(e){setTimeout(function(){w(!1)},500)},onChange:k})),r.a.createElement("div",{className:"search-result",style:{display:l.length>0&&O?"block":"none"}},l.length>0&&O?l.map(function(e,t){return r.a.createElement("div",{className:"search-result-item",key:e._id,onClick:function(t){window.open("/movie/"+e._id,"_blank")}},r.a.createElement("div",{className:"item-image"},r.a.createElement("img",{src:E[t]})),r.a.createElement("div",{className:"item-info"},r.a.createElement("p",null,x(document.getElementById("search-input").value,e.title)),r.a.createElement(g.a,{isReadOnly:!0,unit:"float",initialRating:e.rating,size:.02*window.innerHeight}),r.a.createElement("p",null,x(document.getElementById("search-input").value,e.gerne)),r.a.createElement("p",null,x(document.getElementById("search-input").value,e.director)),r.a.createElement("p",null,x(document.getElementById("search-input").value,e.stars.join(" , ")))))}):""))}),E=function(e){var t=Object(o.f)(),a=Object(n.useState)(!1),c=Object(d.a)(a,2),s=c[0],i=c[1];return r.a.createElement("div",{className:"top-bar"},r.a.createElement("div",{className:"logo",onClick:function(){t("/")}},"Time2Movie"),r.a.createElement(v,null),e.currentUser?r.a.createElement("div",{className:"welcome"},r.a.createElement("img",{src:e.currentUser.image}),r.a.createElement("div",{className:"welcome-text"},r.a.createElement("p",null,"Welcome!  "),r.a.createElement("p",null,"  ",e.currentUser.name)),r.a.createElement("div",{className:"user-menu"},r.a.createElement("i",{class:"fa fa-bars","aria-hidden":"true",onClick:function(){return i(!s)}}),r.a.createElement("div",{className:"menu",style:{display:s?"block":"none"}},r.a.createElement("div",{className:"logout"},r.a.createElement("i",{class:"fa fa-sign-out"}),r.a.createElement("p",null,"Sign out")),r.a.createElement("div",{className:"profile"},r.a.createElement("i",{class:"fa fa-user","aria-hidden":"true"}),r.a.createElement("p",null,"Profile"))))):r.a.createElement("div",{className:"auth"},r.a.createElement("button",{onClick:function(){t("/signup")}},"Sign up"),r.a.createElement("button",{onClick:function(){t("/signin")}},"Sign in")))},b=a(23),j=a.n(b),y=a(56),O=a.n(y),w=function(e){var t=Object(n.useState)([]),a=Object(d.a)(t,2),c=a[0],s=a[1],i=Object(o.f)(),l=Object(n.useState)(-1),p=Object(d.a)(l,2),f=p[0],v=p[1],E=Object(n.useState)(!1),b=Object(d.a)(E,2),y=b[0],w=b[1],k=Object(n.useState)({dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1,autoplay:!1,autoplaySpeed:3e3,beforeChange:function(e,t){w(!0)},afterChange:function(e){w(!1)}}),x=Object(d.a)(k,2),N=x[0],S=(x[1],function(){var t=Object(m.a)(u.a.mark(function t(){var a,n,r,c,i,o;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="Similar to this movie"===e.type?"".concat(h,"/api/movie/get-similar/").concat(e.title):"Trending now"===e.type?"".concat(h,"/api/movie/get-trending"):"Recommended for you"===e.type?"".concat(h,"/api/movie/get-user-recommendation/").concat(e.userId):"".concat(h,"/api/movie/get"),t.next=3,fetch(a);case 3:return n=t.sent,console.log(n),t.next=7,n.json();case 7:r=t.sent,c=0;case 9:if(!(c<r.length)){t.next=20;break}return t.next=12,fetch("https://api.themoviedb.org/3/search/movie?api_key=15d2ea6d0dc1d476efbca3eba2b9bbfb&query=".concat(r[c].title));case 12:return i=t.sent,t.next=15,i.json();case 15:o=t.sent,r[c].image="http://image.tmdb.org/t/p/w500/".concat(o.results[0]?o.results[0].poster_path:"/default_movie_poster.jpg");case 17:++c,t.next=9;break;case 20:s(r),console.log(r);case 22:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}());return console.log(c),Object(n.useEffect)(Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S();case 1:case"end":return e.stop()}},e)})),[]),r.a.createElement("div",{className:"movie-slider"},r.a.createElement("h2",null," ",e.type," "),c.length>0?r.a.createElement(j.a,N,c.map(function(e,t){return r.a.createElement("div",{className:"movie-item",key:t},r.a.createElement("div",{className:"movie-info",onClick:function(t){return!y&&i("/movie/".concat(e._id))},style:{transform:f===t?"translateY(-10px)":"none"},onMouseEnter:function(e){return v(t)},onMouseLeave:function(e){return v(-1)}},r.a.createElement("div",{className:"movie-image"},r.a.createElement("img",{src:e.image})),r.a.createElement("div",{className:"rating"},r.a.createElement("p",null,e.release),r.a.createElement(g.a,{isReadOnly:!0,initialRating:e.rating,size:.03*window.innerHeight})),r.a.createElement("span",null,e.title.toUpperCase()),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,e.overview))))})):r.a.createElement("div",{className:"loading-movielist"},r.a.createElement(O.a,{type:"spin",color:"#3A3A3A"})))},k=a(17),x=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([{type:1,content:"Hello! How can we help you?"}]),i=Object(d.a)(s,2),o=i[0],l=i[1],p=function(e){e.length>0&&l([].concat(Object(k.a)(o),[{type:0,content:e}]))},f=function(){var e=Object(m.a)(u.a.mark(function e(t){var a,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t})},e.next=3,fetch("".concat(h,"/api/movie/bot-reply"),a);case 3:return n=e.sent,e.next=6,n.json();case 6:r=e.sent,(c=r.message).length>0&&l([].concat(Object(k.a)(o),[{type:1,content:c}]));case 8:case"end":return e.stop()}var c},e)}));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){var e=document.createElement("script");return e.src="https://apps.elfsight.com/p/platform.js",e.async=!0,document.body.appendChild(e),function(){document.body.removeChild(e)}},[]),Object(n.useEffect)(function(){document.getElementsByClassName("dummy")[0].scrollTop=99999999,0===o.at(-1).type&&f(o.at(-1).content)},[o]),r.a.createElement("div",{className:"message-box"},r.a.createElement("script",{src:"https://apps.elfsight.com/p/platform.js",defer:!0}),r.a.createElement("div",{class:"elfsight-app-05bc3da4-6fd8-406c-b8db-5b6f627ecd8b"}),r.a.createElement("div",{className:"message-title"},"Time2Movie",r.a.createElement("i",{class:a?"fa fa-angle-down":"fa fa-angle-up",onClick:function(){return c(!a)}})),r.a.createElement("div",{className:"message-content",style:{display:a?"block":"none"}},r.a.createElement("div",{className:"messages"},r.a.createElement("div",{className:"dummy"},o.map(function(e){return r.a.createElement("div",{className:"message ".concat(0===e.type?"client":"server")},0===e.type?r.a.createElement("p",null,e.content):r.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.content}}))}))),r.a.createElement("div",{className:"input"},r.a.createElement("textarea",{id:"input-text",placeholder:"Aa",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),p(e.target.value),e.target.value="",e.target.focus(),e.target.setSelectionRange(0,0))}}),r.a.createElement("button",{className:"submit-message",onClick:function(e){p(document.getElementById("input-text").value),document.getElementById("input-text").value="",document.getElementById("input-text").focus(),document.getElementById("input-text").setSelectionRange(0,0)}},"Send"))))},N=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"project-info"},r.a.createElement("h3",null,"Time2Movie"),r.a.createElement("p",null,"This is a project for course CS422"),r.a.createElement("p",null,"Movie data is from")),r.a.createElement("div",{className:"contact-info"},r.a.createElement("h3",null,"Contact us"),r.a.createElement("p",null,"Nguyen Khanh Nguyen: nknguyen19@apcs.fitus.edu.vn"),r.a.createElement("p",null,"Nguyen Thieu Khang: ntkhang19@apcs.fitus.edu.vn"),r.a.createElement("p",null,"Nguyen Quoc Khanh Tuyen: nqktuyen@apcs.fitus.edu.vn")))},S=function(){Object(o.f)();var e=Object(n.useState)(),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(Object(p.a)({dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},"dots",!1)),i=Object(d.a)(s,2),l=i[0],f=(i[1],Object(n.useState)([])),g=Object(d.a)(f,2),v=g[0],b=g[1];return Object(n.useEffect)(Object(m.a)(u.a.mark(function e(){var t,a,n,r,s,i,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(h,"production"),e.next=3,fetch("".concat(h,"/api/movie/get"));case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,n=0;case 8:if(!(n<a.length)){e.next=19;break}return e.next=11,fetch("https://api.themoviedb.org/3/search/movie?api_key=15d2ea6d0dc1d476efbca3eba2b9bbfb&query=".concat(a[n].title));case 11:return r=e.sent,e.next=14,r.json();case 14:s=e.sent,a[n].image="http://image.tmdb.org/t/p/w500/".concat(s.results[0]?s.results[0].poster_path:"/default_movie_poster.jpg");case 16:++n,e.next=8;break;case 19:return b(a),e.next=22,fetch("".concat(h,"/api/user/get-current-user"));case 22:if(!((i=e.sent).status<=200)){e.next=28;break}return e.next=26,i.json();case 26:o=e.sent,c(o);case 28:case"end":return e.stop()}},e)})),[]),r.a.createElement("div",{className:"home"},r.a.createElement(E,{currentUser:a}),r.a.createElement("div",{className:"intro-slider"},r.a.createElement(j.a,l,v.map(function(e){return r.a.createElement("div",{className:"movie-intro"},r.a.createElement("div",{className:"movie-title"},r.a.createElement("h1",null,e.title),r.a.createElement("p",null,e.overview)),r.a.createElement("div",{className:"movie-image"},r.a.createElement("img",{src:e.image})))}))),r.a.createElement(w,{type:"Trending now"}),a?r.a.createElement(w,{type:"Recommended for you",userId:a._id}):"",r.a.createElement(x,null),r.a.createElement(N,null))},C=a(24),_=a.n(C),T=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),i=Object(d.a)(s,2),l=i[0],u=i[1],m=Object(n.useState)(""),p=Object(d.a)(m,2),f=p[0],g=p[1],v=Object(o.f)(),E=function(){if(0!==a.length&&0!==l){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:l})};fetch("".concat(h,"/api/user/create"),e).then(function(e){return e.json()}).then(function(e){e.message?g(e.message):(document.getElementsByClassName("userid")[0].value=e._id,v("/"))})}};return r.a.createElement("div",{className:"signup"},r.a.createElement("div",{className:"signup-wrap"},r.a.createElement("div",{className:"signup-form"},r.a.createElement("h3",null,"Sign up"),r.a.createElement("p",null,"Time2Movie is totally free to use. Sign up using your email address or phone number below to get started."),r.a.createElement("span",null,f),r.a.createElement("input",{type:"text",placeholder:"Username",onChange:function(e){return c(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(e){return u(e.target.value)}}),r.a.createElement("div",{className:"signup-btn",onClick:function(){return E}},"Create account"),r.a.createElement("div",{className:"or"},r.a.createElement("hr",null)," Or ",r.a.createElement("hr",null)),r.a.createElement(_.a,{className:"facebook-signup",appId:"466280858581721",autoLoad:!0,fields:"name,email,picture",callback:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.email,password:e.id,name:e.name,avatar:e.picture.data.url,is_facebook_login:!0})};fetch("".concat(h,"/api/user/login-facebook"),t).then(function(e){return e.json()}).then(function(e){document.getElementsByClassName("userid")[0].value=e._id,v("/")})}}),r.a.createElement("p",null,"Already have an account?",r.a.createElement("a",{href:"/signin"},"Sign in"))),r.a.createElement("img",{src:"signup-background.jpg",alt:"image"})))},L=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),i=Object(d.a)(s,2),l=i[0],u=i[1],m=Object(n.useState)(""),p=Object(d.a)(m,2),f=p[0],g=p[1],v=Object(o.f)();return r.a.createElement("div",{className:"signin"},r.a.createElement("div",{className:"signin-wrap"},r.a.createElement("div",{className:"signin-form"},r.a.createElement("h3",null,"Welcome back to"),r.a.createElement("p",null,"Sign in using your account registered with Time2Movie"),r.a.createElement("span",null,f),r.a.createElement("input",{type:"text",placeholder:"Username",onChange:function(e){return c(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Password",onChange:function(e){return u(e.target.value)}}),r.a.createElement("div",{className:"signin-btn",onClick:function(){return function(){if(0!==a.length&&0!==l){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:l})};fetch("".concat(h,"/api/user/signin"),e).then(function(e){return e.json()}).then(function(e){e.message?g(e.message):(document.getElementsByClassName("userid")[0].value=e._id,v(-1))})}}()}},"Sign in"),r.a.createElement("div",{className:"or"},r.a.createElement("hr",null)," Or ",r.a.createElement("hr",null)),r.a.createElement(_.a,{className:"facebook-signup",appId:"466280858581721",fields:"name,email,picture",callback:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.email,password:e.id,name:e.name,avatar:e.picture.data.url,is_facebook_login:!0})};fetch("".concat(h,"/api/user/login-facebook"),t).then(function(e){return e.json()}).then(function(e){document.getElementsByClassName("userid")[0].value=e._id,v(-1)})}}),r.a.createElement("p",null,"Don't have an account? ",r.a.createElement("a",{href:"/signup"},"Sign up"))),r.a.createElement("img",{src:"signin-background.jpg",alt:"image"})))},B=a(9),I=(a(87),a(57)),R=a.n(I),D=function(){var e=Object(n.useState)({}),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(),i=Object(d.a)(s,2),o=i[0],l=i[1];return r.a.createElement("div",{className:"movie-form"},r.a.createElement("input",{type:"text",placeholder:"Title",onChange:function(e){return c(Object(B.a)({},a,{title:e.target.value.toLowerCase()}))}}),r.a.createElement("input",{type:"number",placeholder:"Episodes",onChange:function(e){return c(Object(B.a)({},a,{episodes:e.target.value.toLowerCase()}))}}),r.a.createElement("input",{type:"date",placeholder:"Release Date",onChange:function(e){return c(Object(B.a)({},a,{release:e.target.value.toLowerCase()}))}}),r.a.createElement("input",{type:"text",placeholder:"Country",onChange:function(e){return c(Object(B.a)({},a,{country:e.target.value.toLowerCase()}))}}),r.a.createElement("input",{type:"text",placeholder:"Director",onChange:function(e){return c(Object(B.a)({},a,{director:e.target.value.toLowerCase()}))}}),r.a.createElement("input",{type:"text",placeholder:"Starring",onChange:function(e){return c(Object(B.a)({},a,{starring:e.target.value.toLowerCase()}))}}),r.a.createElement("input",{type:"file",name:"file",onChange:function(e){return l(e.target.files[0])}}),r.a.createElement("textarea",{name:"description",rows:"5",placeholder:"description",onChange:function(e){return c(Object(B.a)({},a,{description:e.target.value.toLowerCase()}))}}),r.a.createElement("div",{onClick:function(){var e=new FormData;e.append("file",o),e.append("movie",JSON.stringify(a)),R()({method:"post",url:"".concat(h,"/api/movie/create"),data:e,headers:{"Content-Type":"multipart/form-data"}})}},"Create"))},U=function(){var e=Object(n.useState)(),t=Object(d.a)(e,2),a=t[0],c=t[1],s=Object(o.f)(),i=Object(n.useState)(!1),l=Object(d.a)(i,2),p=l[0],f=l[1];return Object(n.useEffect)(Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/api/user/get-current-user"));case 2:if(200!==(t=e.sent).status){e.next=10;break}return e.next=6,t.json();case 6:a=e.sent,c(a),e.next=11;break;case 10:s("/signin");case 11:case"end":return e.stop()}},e)})),[]),r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"home-intro"},r.a.createElement("div",{className:"home-title"},"Time2Movie"),r.a.createElement("div",{className:"welcome"},r.a.createElement("img",{src:a&&a.image}),r.a.createElement("div",null,"Welcome ",a&&a.name," !")),r.a.createElement("div",{className:"add-movie-btn",style:{display:p?"none":"block"},onClick:function(){return f(!0)}},"Add a movie"),p?r.a.createElement(D,null):"",r.a.createElement("img",{src:"background.png",alt:"image"})))},P=(a(138),a(54),function(e){var t,a=e.comment,c=e.removeComment,s=e.currentUser,i=Object(n.useState)(0),o=Object(d.a)(i,2),l=o[0],p=o[1],f=Object(n.useState)(!1),g=Object(d.a)(f,2),v=g[0],E=g[1],b=function(e){return e.toString().padStart(2,"0")},j=function(){var e=Object(m.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/api/like/get/").concat(a._id));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,p(n.length),n.find(function(e){return e.userid===a.userid})?E(!0):E(!1);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat(h,"/api/like/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentid:a._id,userid:s._id})});case 4:e.sent,j();case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat(h,"/api/like/remove"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentid:a._id,userid:s._id})});case 4:e.sent,j();case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){j()},[]),r.a.createElement("div",{className:"comment"},r.a.createElement("div",{className:"comment-avatar"},r.a.createElement("img",{src:a.avatar})),r.a.createElement("div",{className:"comment-text"},r.a.createElement("p",{className:"name"},a.name),r.a.createElement("p",{className:"content"},a.content),r.a.createElement("div",{className:"comment-info"},r.a.createElement("div",null,r.a.createElement("p",null,l),r.a.createElement("i",{class:"fa fa-thumbs-up"})),r.a.createElement("div",null,r.a.createElement("p",{className:"like-button",onClick:function(){v?O():y()}},v?"UnLike":"Like"),r.a.createElement("p",{className:"like-button",onClick:function(){c(a)}},"Remove"),r.a.createElement("p",{className:"date"},(t=new Date(a.createdAt),[b(t.getDate()),b(t.getMonth()+1),t.getFullYear()].join("/")))))))}),J=function(e){var t=e.currentUser,a=e.movie,c=Object(n.useState)([]),s=Object(d.a)(c,2),i=s[0],o=s[1];Object(n.useEffect)(Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l();case 1:case"end":return e.stop()}},e)})),[]);var l=function(){var e=Object(m.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/api/comment/get/").concat(a._id));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,o(n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(m.a)(u.a.mark(function e(a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(a.userid===t._id){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,fetch("".concat(h,"/api/comment/remove"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a._id})});case 6:e.sent,console.log("debug"),l();case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(m.a)(u.a.mark(function e(){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/api/comment/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:t._id,movieid:a._id,content:document.getElementById("input-comment").value})});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,o([].concat(Object(k.a)(i),[r])),document.getElementById("input-comment").value="",l();case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"comments"},r.a.createElement("h2",null,"Comments"),r.a.createElement("div",{className:"comments-list"},i.map(function(e,a){return r.a.createElement(P,{comment:e,removeComment:p,currentUser:t})})),t?r.a.createElement("div",{className:"add-comment"},r.a.createElement("img",{src:t.image}),r.a.createElement("input",{id:"input-comment",type:"text",placeholder:"Add your comment here ..."}),r.a.createElement("button",{onClick:f},"Send")):"")},M=a(28),F=function(){var e=Object(o.g)().id,t=Object(n.useState)(null),a=Object(d.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(0),l=Object(d.a)(i,2),p=l[0],f=l[1],v=Object(n.useState)(),b=Object(d.a)(v,2),j=b[0],y=b[1],O=Object(n.useState)([]),k=Object(d.a)(O,2),x=(k[0],k[1],function(){var t=Object(m.a)(u.a.mark(function t(){var a,n,r,c;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(h,"/api/movie/get/").concat(e));case 2:if(!((a=t.sent).status<=200)){t.next=16;break}return t.next=6,a.json();case 6:return n=t.sent,f(n.ratings),console.log(n),t.next=11,fetch("https://api.themoviedb.org/3/search/movie?api_key=15d2ea6d0dc1d476efbca3eba2b9bbfb&query=".concat(n.title));case 11:return r=t.sent,t.next=14,r.json();case 14:c=t.sent,s(Object(B.a)({},n,{image:"http://image.tmdb.org/t/p/w500/".concat(c.results[0]?c.results[0].poster_path:"/default_movie_poster.jpg")}));case 16:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()),S=function(){var e=Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/api/user/get-current-user"));case 2:if(!((t=e.sent).status<=200)){e.next=8;break}return e.next=6,t.json();case 6:a=e.sent,y(a);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/api/movie/get-similar/").concat(c.title));case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,console.log(a);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)(Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:x(),S();case 2:case"end":return e.stop()}},e)})),[]),Object(n.useEffect)(Object(m.a)(u.a.mark(function t(){var a,n;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!j){t.next=9;break}return t.next=3,fetch("".concat(h,"/api/review/get/").concat(j._id,"/").concat(e));case 3:if(!((a=t.sent).status<=200)){t.next=9;break}return t.next=7,a.json();case 7:n=t.sent,f(n.ratings);case 9:case"end":return t.stop()}},t)})),[j]),Object(n.useEffect)(Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c&&C();case 1:case"end":return e.stop()}},e)})),[c]);return c?r.a.createElement("div",{className:"movie"},r.a.createElement(E,{currentUser:j}),r.a.createElement(M.StickyShareButtons,{config:{alignment:"left",color:"social",enabled:!0,font_size:16,hide_desktop:!1,labels:"counts",language:"en",min_count:0,networks:["linkedin","facebook","pinterest","twitter","messenger"],padding:12,radius:4,show_total:!0,show_mobile:!0,show_toggle:!0,size:48,top:160,url:window.location.href,image:c.image,description:"Check",title:"custom title"}}),r.a.createElement("div",{className:"heading"},r.a.createElement("img",{src:c.image}),r.a.createElement("div",{className:"info"},r.a.createElement("h1",null,c.title.toUpperCase()),r.a.createElement("h3",null,new Date(Date.parse(c.release)).getFullYear()),r.a.createElement("h3",null,"Director: ",c.director),r.a.createElement("h3",null,"Starring: ",c.stars.join(" , ")),console.log(c.stars),r.a.createElement("div",{className:"avg-rating"},r.a.createElement("h3",null,"Community Rating"),r.a.createElement(g.a,{isReadOnly:!0,unit:"float",initialRating:c.rating})),r.a.createElement("div",{className:"user-rating"},r.a.createElement("h3",null,"Your Rating"),r.a.createElement(g.a,{unit:"float",handleOnClick:function(e){if(f(e),j&&c){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:j._id,movieid:c._id,ratings:e})};fetch("".concat(h,"/api/review/create"),t).then(function(e){return e.json()}).then(function(e){e.message||x()})}},initialRating:p})),r.a.createElement(M.InlineReactionButtons,{config:{alignment:"left",enabled:!0,language:"en",min_count:0,padding:12,reactions:["slight_smile","heart_eyes","laughing","astonished","sob","rage"],size:25,spacing:5}}))),r.a.createElement("p",{className:"description"},c.overview),c?r.a.createElement(w,{type:"Similar to this movie",title:c.title}):"",r.a.createElement(J,{currentUser:j,movie:c}),r.a.createElement(N,null)):r.a.createElement("div",null)},A=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("link",{rel:"stylesheet",type:"text/css",charset:"UTF-8",href:"https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.min.css"}),r.a.createElement("link",{rel:"stylesheet",type:"text/css",href:"https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick-theme.min.css"}),r.a.createElement("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"}),r.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Poppins",rel:"stylesheet"}),r.a.createElement(i.a,null,r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",element:r.a.createElement(S,null)}),r.a.createElement(o.a,{path:"/signin",element:r.a.createElement(L,null)}),r.a.createElement(o.a,{path:"/signup",element:r.a.createElement(T,null)}),r.a.createElement(o.a,{path:"/admin",element:r.a.createElement(U,null)}),r.a.createElement(o.a,{path:"/movie/:id",element:r.a.createElement(F,null)})),r.a.createElement("input",{className:"userid",type:"hidden"})))},q=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,142)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)})};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),q()},54:function(e,t,a){},58:function(e,t,a){e.exports=a(141)},63:function(e,t,a){},65:function(e,t,a){e.exports=a.p+"static/media/logo.06e73328.svg"},66:function(e,t,a){},70:function(e,t,a){}},[[58,3,2]]]);
//# sourceMappingURL=main.3c4e1872.chunk.js.map